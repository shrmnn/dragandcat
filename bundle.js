(()=>{const e=document.querySelector(".grid"),t=document.querySelector(".hoop"),o=document.querySelector(".spawner");let n,l;const r=e=>{console.log("down!"),e.preventDefault(),n=e.target,n.classList.add("absolute"),n.classList.add("hold"),a(n,e),document.addEventListener("pointermove",s),n.addEventListener("pointerup",c),n.ondragstart=()=>!1},s=e=>{e.preventDefault(),a(n,e)},c=r=>{r.preventDefault(),console.log("up!"),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",c),n.classList.remove("hold"),l=document.elementsFromPoint(r.clientX,r.clientY).filter((o=>[e,t].includes(o)))[0],l&&l.classList.add("hovered"),l===e&&(function(e){e.classList.remove("absolute"),e.style.left="0",e.style.top="0"}(n),d(n)),l===t&&(function(e,t){(e.offsetX<0||e.offsetY<0)&&e.parentNode.removeChild(e),a(e,t,{x:l.offsetLeft,y:l.offsetTop})}(n,r),d(n)),l&&"undefined"!==l||function(e){e.parentNode.removeChild(e),o.childElementCount<=0&&i()}(n),l&&l.classList.remove("hovered")};function d(e){l.append(e),o.childElementCount<=0&&i()}function a(e,t,o={x:0,y:0}){e.style.left=t.pageX-o.x-50+"px",e.style.top=t.pageY-o.y-50+"px"}function i(){const e=document.createElement("div");e.className="cat",e.style.outlineColor=`#${Math.floor(16777215*Math.random()).toString(16)}`,u(e),e.addEventListener("pointerdown",r),o.append(e)}const u=e=>{fetch("https://loremflickr.com/500/500/cat").then((t=>e.style.backgroundImage=`url(${t.url})`)).catch((e=>console.error(e)))};i()})();